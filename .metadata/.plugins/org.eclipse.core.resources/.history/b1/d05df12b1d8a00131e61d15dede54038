package perceptron;

import java.util.ArrayList;

import datastructure.Tuple;

public class program_profile {

	public static void main(String[] args) {
		// TODO Auto-generated method stub
		String line="1 |features f13:3.9656971e-02 f24:3.4781646e-02 f69:4.6296168e-02 f85:6.1853945e-02 f140:3.2349996e-02 f156:1.0290844e-01 f175:6.8493910e-02 f188:2.8366476e-02 f229:7.4871540e-02 f230:9.1505975e-02 f234:5.4200061e-02 f236:4.4855952e-02 f238:5.3422898e-02 f387:1.4059304e-01 f394:7.5131744e-02 f433:1.1118756e-01 f434:1.2540409e-01 f438:6.5452829e-02 f465:2.2644201e-01 f468:8.5926279e-02 f518:1.0214076e-01 f534:9.4191484e-02 f613:7.0990764e-02 f646:8.7701865e-02 f660:7.2289191e-02 f709:9.0660661e-02 f752:1.0580081e-01 f757:6.7965068e-02 f812:2.2685185e-01 f932:6.8250686e-02 f1028:4.8203137e-02 f1122:1.2381379e-01 f1160:1.3038123e-01 f1189:7.1542501e-02 f1530:9.2655659e-02 f1664:6.5160148e-02 f1865:8.5823394e-02 f2524:1.6407280e-01 f2525:1.1528353e-01 f2526:9.7131468e-02 f2536:5.7415009e-01 f2543:1.4978983e-01 f2848:1.0446861e-01 f3370:9.2423186e-02 f3960:1.5554591e-01 f7052:1.2632671e-01 f16893:1.9762035e-01 f24036:3.2674628e-01 f24303:2.2660980e-01 const:0.1";
		long s=System.currentTimeMillis();
		Tuple pred=read_into_tuples(line);
		long e=System.currentTimeMillis();
		System.out.println("time is "+(e-s));
	}
	
	
	//if use linked list to deal with this.
	public static Tuple read_into_tuples(String line){
		
		String valid_line=line.substring(12,line.length()-9);
		String[] arr=valid_line.split(" ");
		Tuple head=new Tuple(Integer.MIN_VALUE,Integer.MIN_VALUE);
		Tuple p=head.next;
		String new_str="";
		
		for(String single:arr){
			new_str=single.substring(1,single.length());
			int index=Integer.parseInt(new_str.split(":")[0]);
			double value=Double.parseDouble(new_str.split(":")[1]);
			p.next=new Tuple(extract_value(single));
			p=p.next;
		}
		return head.next;
	}
	
	// test ok!
	// Extract every single term of that line;
	public static Tuple extract_value(String single){
		String new_str=single.substring(1,single.length());
		String[] arr=new_str.split(":");
		int index=Integer.parseInt(arr[0]);
		double value=Double.parseDouble(arr[1]);
		Tuple result=new Tuple(index,value);
		return result;
	}

}
